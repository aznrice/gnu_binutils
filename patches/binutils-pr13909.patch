2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	PR ld/13909
	* elf-eh-frame.c (_bfd_elf_maybe_strip_eh_frame_hdr): Ignore
	.eh_frame section created by linker.

diff --git a/bfd/elf-eh-frame.c b/bfd/elf-eh-frame.c
index 8ec34ab..d99fc73 100644
--- a/bfd/elf-eh-frame.c
+++ b/bfd/elf-eh-frame.c
@@ -1278,7 +1278,10 @@ _bfd_elf_maybe_strip_eh_frame_hdr (struct bfd_link_info *info)
 	/* Count only sections which have at least a single CIE or FDE.
 	   There cannot be any CIE or FDE <= 8 bytes.  */
 	o = bfd_get_section_by_name (abfd, ".eh_frame");
-	if (o && o->size > 8 && !bfd_is_abs_section (o->output_section))
+	if (o
+	    && o->size > 8
+	    && (o->flags & SEC_LINKER_CREATED) == 0
+	    && !bfd_is_abs_section (o->output_section))
 	  break;
       }
 
